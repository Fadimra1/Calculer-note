<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>ISIMG Exact Calculator</title>
    <style>
      body {
        font-family: Arial;
        background: #0f172a;
        color: white;
        padding: 30px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 8px;
        text-align: center;
        border-bottom: 1px solid #334155;
      }
      th {
        background: #111827;
      }
      input {
        width: 90%;
        padding: 6px;
        border-radius: 6px;
        border: none;
        background: #1e293b;
        color: white;
      }
      .disabled {
        background: #020617;
        opacity: 0.4;
      }
      button {
        margin-top: 15px;
        padding: 10px 18px;
        border: none;
        border-radius: 8px;
        background: #38bdf8;
        font-size: 16px;
      }
      .result {
        margin-top: 20px;
        font-size: 22px;
        text-align: center;
      }
    </style>
  </head>

  <body>
    <h2 style="text-align: center">ISIMG – Exact Relevé Calculator</h2>

    <table id="t">
      <thead>
        <tr>
          <th>Matière</th>
          <th>Coeff</th>
          <th>DS</th>
          <th>TP / Oral</th>
          <th>EX</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <button onclick="calc()">Calculate</button>
    <div class="result" id="res"></div>

    <script>
      const modules = [
        ["Probabilité et statistique", 2, "DSTP"],
        ["Théorie des langages et automates", 1, "DS"],
        ["Graphes et optimisation", 1, "DS"],
        ["Conception des systèmes d'information", 1.5, "DS"],
        ["Programmation Java", 2, "DSTP"],
        ["Ingénierie des bases de données", 1.5, "DSTP"],
        ["Services des réseaux", 1, "DSTP"],
        ["Anglais 3", 1, "CC"],
        ["Gestion d’entreprise", 1, "CC"],
        ["Web Design", 1.5, "DSTP"],
        ["Animation 2D", 1.5, "DSTP"],
      ];

      const tbody = document.querySelector("tbody");

      modules.forEach((m) => {
        let tr = document.createElement("tr");
        tr.dataset.type = m[2];
        tr.dataset.coef = m[1];

        tr.innerHTML = `
 <td>${m[0]}</td>
 <td>${m[1]}</td>
 <td><input class="ds" type="number"></td>
 <td><input class="tp" type="number"></td>
 <td><input class="ex" type="number"></td>
 `;
        tbody.appendChild(tr);

        if (m[2] === "DS") {
          tr.querySelector(".tp").disabled = true;
          tr.querySelector(".tp").classList.add("disabled");
        }
      });

      function calc() {
        let sum = 0,
          coefSum = 0;

        document.querySelectorAll("tbody tr").forEach((r) => {
          let type = r.dataset.type;
          let c = parseFloat(r.dataset.coef);

          let ds = +r.querySelector(".ds").value || 0;
          let tp = +r.querySelector(".tp").value || 0;
          let ex = +r.querySelector(".ex").value || 0;

          let note = 0;
          if (type === "DSTP") note = ds * 0.15 + tp * 0.15 + ex * 0.7;
          if (type === "DS") note = ds * 0.3 + ex * 0.7;
          if (type === "CC") note = ds * 0.4 + tp * 0.2 + ex * 0.4;

          sum += note * c;
          coefSum += c;
        });

        document.getElementById("res").innerText =
          "المعدل العام = " + (sum / coefSum).toFixed(2);
      }
    </script>
  </body>
</html>
<!-- deploy -->

