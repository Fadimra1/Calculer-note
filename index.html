<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>ISIMG Mobile Calculator</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial;
  background:#0f172a;
  color:white;
  padding:12px;
}
h2{
  text-align:center;
  margin-bottom:15px;
}
.card{
  background:#020617;
  border:1px solid #334155;
  border-radius:12px;
  padding:12px;
  margin-bottom:12px;
}
.card h3{
  margin:0 0 6px 0;
  font-size:16px;
}
.type{
  font-size:13px;
  color:#94a3b8;
  margin-bottom:8px;
}
.inputs{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:8px;
}
input{
  padding:10px;
  border-radius:8px;
  border:none;
  background:#1e293b;
  color:white;
  font-size:15px;
}
input:disabled{
  opacity:0.4;
}
button{
  width:100%;
  margin-top:15px;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#38bdf8;
  font-size:18px;
  font-weight:bold;
}
.result{
  margin-top:20px;
  font-size:20px;
  text-align:center;
}
</style>
</head>

<body>

<h2>ISIMG – Mobile Grade Calculator</h2>

<div id="app"></div>

<button onclick="calc()">Calculate</button>
<div class="result" id="res"></div>

<script>
const modules = [
["Probabilité et statistique",2,"DSTP"],
["Théorie des langages et automates",1,"DS"],
["Graphes et optimisation",1,"DS"],
["Conception des systèmes d'information",1.5,"DS"],
["Programmation Java",2,"DSTP"],
["Ingénierie des bases de données",1.5,"DSTP"],
["Services des réseaux",1,"DSTP"],
["Anglais 3",1,"CC"],
["Gestion d’entreprise",1,"CC"],
["Web Design",1.5,"DSTP"],
["Animation 2D",1.5,"DSTP"]
];

const app = document.getElementById("app");

modules.forEach(m=>{
 let div=document.createElement("div");
 div.className="card";
 div.dataset.type=m[2];
 div.dataset.coef=m[1];

 div.innerHTML=`
 <h3>${m[0]}</h3>
 <div class="type">${m[2]} | coeff ${m[1]}</div>
 <div class="inputs">
   <input class="ds" type="number" placeholder="DS">
   <input class="tp" type="number" placeholder="${m[2]==='CC'?'Oral':'TP'}">
   <input class="ex" type="number" placeholder="Exam">
 </div>
 `;
 app.appendChild(div);

 if(m[2]==="DS"){
   div.querySelector(".tp").disabled=true;
 }
});

function calc(){
 let sum=0,coefSum=0;

 document.querySelectorAll(".card").forEach(c=>{
   let type=c.dataset.type;
   let coef=parseFloat(c.dataset.coef);

   let ds=+c.querySelector(".ds").value||0;
   let tp=+c.querySelector(".tp").value||0;
   let ex=+c.querySelector(".ex").value||0;

   let note=0;
   if(type==="DSTP") note=ds*0.15+tp*0.15+ex*0.7;
   if(type==="DS") note=ds*0.3+ex*0.7;
   if(type==="CC") note=ds*0.4+tp*0.2+ex*0.4;

   sum+=note*coef;
   coefSum+=coef;
 });

 document.getElementById("res").innerText =
 "المعدل العام = "+(sum/coefSum).toFixed(2);
}
</script>

</body>
</html>
